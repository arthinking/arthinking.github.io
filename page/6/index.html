<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Page 6 | arthinking | ChinSyun Pang&#39;s blog</title>
  <meta name="author" content="arthinking">
  
  <meta name="description" content="Struggle for HighPay zoom.">
  
  

  <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  
  <meta property="og:site_name" content="arthinking"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.ico" rel="icon">
  <link rel="alternate" href="/atom.xml" title="arthinking" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
</head>


<body>
<div id="page" class="site">
  <div id="primary" class="content-area">

    <header id="header" class="inner"><div class="site-branding">
  <h1 class="site-title">
    <a href="/">arthinking</a>
  </h1>
  <p class="site-description">ChinSyun Pang&#39;s blog</p>
</div>
<nav id="site-navigation" class="main-navigation" role="navigation">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
  </ul>
</nav></header>

    <article id="content" class="site-content">
      <main id="main" class="site-main posts-loop" role="main">
        
  <article class="post article">

  
  
    <h3 class="article-title"><a href="/2016/02/04/Maven插件编译问题/"><span>Maven插件编译问题</span></a></h3>
  


  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2016/02/04/Maven插件编译问题/" rel="bookmark">
        <time class="entry-date published" datetime="2016-02-04T08:49:07.000Z">
          2016-02-04
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <blockquote>
<p>Author: ChinSyun Pang<br>Weibo: <a href="http://weibo.com/arthinkingplus" target="_blank" rel="external">arthinking_plus</a><br>Posted in: </p>
</blockquote>
<h1 id="Maven插件编译问题"><a href="#Maven插件编译问题" class="headerlink" title="Maven插件编译问题"></a>Maven插件编译问题</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TestService testService = serviceFactory.getService(ServiceType.testServiceClazz);</span><br></pre></td></tr></table></figure>
<p>maven compile 报如下错误：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[ERROR] /xxx.java:[100，20] xxx.java:106: 不兼容的类型找到： java.lang.Object需要： TestService[INFO] 1 error</span><br></pre></td></tr></table></figure>
<p>而以下代码则不会报错：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TestService testService = serviceFactory.getService(TestService.class);</span><br></pre></td></tr></table></figure>
<p>其中getService()方法如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span>&lt;T&gt; T <span class="title">getService</span><span class="params">(Class&lt;T&gt; class)</span></span>&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>可以发现，报错的代码，传入的Class是动态的，这是导致Maven编译报错的原因。</p>
<p>查看下项目的maven-compiler-plugin插件配置：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span>  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">source</span>&gt;</span>1.6<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">target</span>&gt;</span>1.6<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">showWarnings</span>&gt;</span>flase<span class="tag">&lt;/<span class="name">showWarnings</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>可以发现我们并没有为maven指定其他的JDT(Java Development Tools)，使用的是默认的javac进行编译。而我们在Eclipse里面使用的是自带的JDT，编译没有问题。可见，javac的检查机制更加严格，导致Eclipse可以编译通过的，用Maven编译会报错。在用Maven编译的时候要注意下这点哦。</p>
<p>##Reference</p>
<p><a href="https://maven.apache.org/plugins/" target="_blank" rel="external">maven插件列表</a></p>
<p><a href="http://blog.csdn.net/liushuijinger/article/details/44618557" target="_blank" rel="external">maven编译问题</a></p>
<p><a href="http://help.eclipse.org/mars/index.jsp?topic=%2Forg.eclipse.jdt.doc.isv%2Fguide%2Fjdt_api_compile.htm" target="_blank" rel="external">Compiling Java code</a></p>
<p><a href="http://blog.csdn.net/feng2007110221053/article/details/7311056" target="_blank" rel="external">关于Eclipse和Javac编译结果不一致的问题分析与解决</a></p>
<p><a href="http://stackoverflow.com/questions/3061654/what-is-the-difference-between-javac-and-the-eclipse-compiler" target="_blank" rel="external">What is the difference between javac and the Eclipse compiler?</a></p>

      
    </div>
    <footer class="article-footer">
        <div class="article-meta pull-left">
          
  

  <span class="post-categories">
    <i class="icon-categories"></i>
    <a href="/categories/Java/">Java</a>, <a href="/categories/Java/Maven/">Maven</a>
  </span>


          
  

  <span class="post-tags">
    <i class="icon-tags"></i>
    <a href="/tags/Maven/">Maven</a>
  </span>


        </div>
        
    </footer>
  </div>
</article>



  <article class="post article">

  
  
    <h3 class="article-title"><a href="/IDE/IntelliJ IDEA/2016-02-03 IntelliJ IDEA系列1/"><span>INtelliJ IDEA系列1</span></a></h3>
  


  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/IDE/IntelliJ IDEA/2016-02-03 IntelliJ IDEA系列1/" rel="bookmark">
        <time class="entry-date published" datetime="2016-02-03T04:35:11.000Z">
          2016-02-03
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <blockquote>
<p>Author: ChinSyun Pang<br>Weibo: <a href="http://weibo.com/arthinkingplus" target="_blank" rel="external">arthinking_plus</a><br>Posted in: <a href="http://www.itzhai.com" target="_blank" rel="external">http://www.itzhai.com</a></p>
</blockquote>
<h2 id="修改主题"><a href="#修改主题" class="headerlink" title="修改主题"></a>修改主题</h2><p>IntelliJ IDEA对目录做了调整，把偏好设置调整到了如下目录：</p>
<p>IntelliJ IDEA –&gt; preferences(快捷键：⌘,) –&gt; Appearance &amp; Behavior –&gt; Appearance –&gt; UI Options –&gt; Theme</p>
<p>旧版本的可以在<code>file --&gt; Settings中找到</code>。</p>
<h2 id="编译"><a href="#编译" class="headerlink" title="编译"></a>编译</h2><p>有如下三种编译：</p>
<ul>
<li>Compile</li>
</ul>
<p>对特定的代码文件进行强制编译；</p>
<ul>
<li>Rebuild</li>
</ul>
<p>对选择的project进行强制编译；</p>
<ul>
<li>Make</li>
</ul>
<p>对选定的Project或者Module进行编译，只编译改动过的文件；</p>
<p><code>shift + command + F9</code>  compile one class.</p>
<h3 id="Run配置"><a href="#Run配置" class="headerlink" title="Run配置"></a>Run配置</h3><p>Run –&gt; Edit Configurations</p>
<h2 id="项目结构设置"><a href="#项目结构设置" class="headerlink" title="项目结构设置"></a>项目结构设置</h2><p>file –&gt; project structrue(快捷键：⌘;)<br>可以在这里管理SDK版本(Platform Settings –&gt; SDKs)，设置项目SDK(Project Settings –&gt; Project)。</p>
<h3 id="language-level"><a href="#language-level" class="headerlink" title="language level"></a>language level</h3><p>对于大型项目，各个 Module 用到的 SDK 和 language level 很有可能是各不一样的，IntelliJ IDEA 对此也进行了支持。(Project Settings –&gt; Modules –&gt; Sources –&gt; Lauguage Level…)</p>
<h2 id="编辑"><a href="#编辑" class="headerlink" title="编辑"></a>编辑</h2><h3 id="实时代码模板"><a href="#实时代码模板" class="headerlink" title="实时代码模板"></a>实时代码模板</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">IntelliJ IDEA --&gt; Editor --&gt; Live Template</span><br></pre></td></tr></table></figure>
<p>提示快捷键：<code>Tab</code> 和 <code>Ctrl + J</code></p>
<h3 id="文件代码模板"><a href="#文件代码模板" class="headerlink" title="文件代码模板"></a>文件代码模板</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Prefrences --&gt; Editor --&gt; File and code Template</span><br></pre></td></tr></table></figure>
<p>IntelliJ IDEA 的文件代码模板是可以用Velocity Template Language进行书写的；</p>
<h3 id="Emmet的使用"><a href="#Emmet的使用" class="headerlink" title="Emmet的使用"></a>Emmet的使用</h3><p>该工具常用于前端代码的自动生成；</p>
<h3 id="Postfix-Completion的使用"><a href="#Postfix-Completion的使用" class="headerlink" title="Postfix Completion的使用"></a>Postfix Completion的使用</h3><p>代码模板的自动补全功能</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Preferences --&gt; Editor --&gt; General --&gt; Postfix Completion</span><br></pre></td></tr></table></figure>
<h2 id="插件讲解"><a href="#插件讲解" class="headerlink" title="插件讲解"></a>插件讲解</h2><p><a href="https://plugins.jetbrains.com/" target="_blank" rel="external">官方插件库</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Preferences --&gt; Plugins</span><br></pre></td></tr></table></figure></p>
<h2 id="Eclipse的Java-Web项目环境搭建"><a href="#Eclipse的Java-Web项目环境搭建" class="headerlink" title="Eclipse的Java Web项目环境搭建"></a>Eclipse的Java Web项目环境搭建</h2><h2 id="Maven项目介绍"><a href="#Maven项目介绍" class="headerlink" title="Maven项目介绍"></a>Maven项目介绍</h2><h2 id="Debug讲解"><a href="#Debug讲解" class="headerlink" title="Debug讲解"></a>Debug讲解</h2><h2 id="重构讲解"><a href="#重构讲解" class="headerlink" title="重构讲解"></a>重构讲解</h2><h2 id="数据库管理工具"><a href="#数据库管理工具" class="headerlink" title="数据库管理工具"></a>数据库管理工具</h2><h2 id="IntelliJ-IDEA常用设置"><a href="#IntelliJ-IDEA常用设置" class="headerlink" title="IntelliJ IDEA常用设置"></a>IntelliJ IDEA常用设置</h2><h2 id="IntelliJ-IDEA常用快捷键讲解（Win-Linux）"><a href="#IntelliJ-IDEA常用快捷键讲解（Win-Linux）" class="headerlink" title="IntelliJ IDEA常用快捷键讲解（Win + Linux）"></a>IntelliJ IDEA常用快捷键讲解（Win + Linux）</h2><h2 id="IntelliJ-IDEA常用快捷键讲解（Mac）"><a href="#IntelliJ-IDEA常用快捷键讲解（Mac）" class="headerlink" title="IntelliJ IDEA常用快捷键讲解（Mac）"></a>IntelliJ IDEA常用快捷键讲解（Mac）</h2><h2 id="IntelliJ-IDEA的Java热部署插件JRebel安装及使用"><a href="#IntelliJ-IDEA的Java热部署插件JRebel安装及使用" class="headerlink" title="IntelliJ IDEA的Java热部署插件JRebel安装及使用"></a>IntelliJ IDEA的Java热部署插件JRebel安装及使用</h2><h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><p><a href="https://github.com/judasn/IntelliJ-IDEA-Tutorial" target="_blank" rel="external">https://github.com/judasn/IntelliJ-IDEA-Tutorial</a></p>
<p><a href="http://wiki.jikexueyuan.com/project/intellij-idea-tutorial/" target="_blank" rel="external">IntelliJ IDEA使用教程</a></p>

      
    </div>
    <footer class="article-footer">
        <div class="article-meta pull-left">
          
  

  <span class="post-categories">
    <i class="icon-categories"></i>
    <a href="/categories/IDE/">IDE</a>
  </span>


          
  

  <span class="post-tags">
    <i class="icon-tags"></i>
    <a href="/tags/IntelliJ-IDEA/">IntelliJ IDEA</a>
  </span>


        </div>
        
    </footer>
  </div>
</article>



  <article class="post article">

  
  
    <h3 class="article-title"><a href="/operating-system/mac/2016-02-02 Mac实用工具安装/"><span>Mac实用工具</span></a></h3>
  


  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/operating-system/mac/2016-02-02 Mac实用工具安装/" rel="bookmark">
        <time class="entry-date published" datetime="2016-02-02T11:41:42.000Z">
          2016-02-02
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <blockquote>
<p>Author: ChinSyun Pang<br>Weibo: <a href="http://weibo.com/arthinkingplus" target="_blank" rel="external">arthinking_plus</a><br>Posted in: <a href="http://www.itzhai.com" target="_blank" rel="external">http://www.itzhai.com</a></p>
</blockquote>
<h1 id="Mac实用工具安装"><a href="#Mac实用工具安装" class="headerlink" title="Mac实用工具安装"></a>Mac实用工具安装</h1><h2 id="安装程序"><a href="#安装程序" class="headerlink" title="安装程序"></a>安装程序</h2><h3 id="安装maven"><a href="#安装maven" class="headerlink" title="安装maven"></a><a href="http://wlb.wlb.blog.163.com/blog/static/46741320154215621382/" target="_blank" rel="external">安装maven</a></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo tar -zxvf 压缩文件名.tar.gz -C /usr/local/maven</span><br></pre></td></tr></table></figure>
<h3 id="安装MySQL"><a href="#安装MySQL" class="headerlink" title="安装MySQL"></a>安装MySQL</h3><p><a href="http://www.cnblogs.com/macro-cheng/archive/2011/10/25/mysql-001.html" target="_blank" rel="external">MAC下安装与配置MySQL</a></p>
<p><a href="http://www.cnblogs.com/TsengYuen/archive/2012/01/11/2318920.html" target="_blank" rel="external">如何在Mac OS X中安装MySQL</a></p>
<h3 id="安装Tomcat"><a href="#安装Tomcat" class="headerlink" title="安装Tomcat"></a>安装Tomcat</h3><p><a href="http://blog.csdn.net/huyisu/article/details/38372663" target="_blank" rel="external">在mac系统安装Apache Tomcat的详细步骤</a></p>
<h3 id="安装Nginx"><a href="#安装Nginx" class="headerlink" title="安装Nginx"></a>安装Nginx</h3><h3 id="安装Memcached"><a href="#安装Memcached" class="headerlink" title="安装Memcached"></a>安装Memcached</h3><h3 id="安装-MySQL客户端"><a href="#安装-MySQL客户端" class="headerlink" title="安装 MySQL客户端"></a>安装 MySQL客户端</h3><h3 id="安装office"><a href="#安装office" class="headerlink" title="安装office"></a>安装office</h3><h3 id="SecureCRT"><a href="#SecureCRT" class="headerlink" title="SecureCRT"></a>SecureCRT</h3><p><a href="http://bbs.feng.com/read-htm-tid-5100374.html" target="_blank" rel="external">Mac下面的SecureCRT(附破解方案) 更新到最新的7.2的破解方案</a></p>
<h3 id="brew"><a href="#brew" class="headerlink" title="brew"></a>brew</h3><p>安装命令如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -LsSf http://github.com/mxcl/homebrew/tarball/master | sudo tar xvz -C/usr/<span class="built_in">local</span> --strip 1</span><br></pre></td></tr></table></figure>
<p>当brew安装成功后，就可以随意安装自己想要的软件了，例如wget，命令如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo brew install wget</span><br></pre></td></tr></table></figure>
<p>卸载的话，命令如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo brew uninstall wget</span><br></pre></td></tr></table></figure>
<p>查看安装软件的话，命令如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo brew search /apache*/</span><br></pre></td></tr></table></figure>
<p>注意/apache*/是使用的正则表达式，用/分割。</p>
<h3 id="nginx"><a href="#nginx" class="headerlink" title="nginx"></a>nginx</h3><blockquote>
<p>1、brew search nginx<br>2、brew install nginx</p>
</blockquote>
<p>启动nginx ，sudo nginx ;访问localhost:8080 发现已出现nginx的欢迎页面了。</p>
<blockquote>
<p>备注： ln -s  /usr/local/sbin/nginx /usr/bin/nginx 做个软连接。</p>
</blockquote>
<p>常用的指令有： </p>
<blockquote>
<p>nginx -V 查看版本，以及配置文件地址<br>nginx -v 查看版本<br>nginx -c filename 指定配置文件<br>nginx -h 帮助</p>
</blockquote>
<p>重新加载配置|重启|停止|退出 nginx</p>
<blockquote>
<p>nginx -s reload|reopen|stop|quit</p>
</blockquote>
<p>打开 nginx</p>
<blockquote>
<p>sudo nginx</p>
</blockquote>
<p>测试配置是否有语法错误</p>
<blockquote>
<p>nginx -t</p>
</blockquote>
<h3 id="其他实用工具"><a href="#其他实用工具" class="headerlink" title="其他实用工具"></a>其他实用工具</h3><ul>
<li><a href="https://wudi.in/archives/317.html" target="_blank" rel="external">Dash for Mac</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
        <div class="article-meta pull-left">
          
  

  <span class="post-categories">
    <i class="icon-categories"></i>
    <a href="/categories/Mac/">Mac</a>
  </span>


          
        </div>
        
    </footer>
  </div>
</article>



  <article class="post article">

  
  
    <h3 class="article-title"><a href="/operating-system/linux/vim/"><span>VIM常用命令</span></a></h3>
  


  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/operating-system/linux/vim/" rel="bookmark">
        <time class="entry-date published" datetime="2016-02-02T06:33:13.000Z">
          2016-02-02
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <blockquote>
<p>Author: ChinSyun Pang<br>Weibo: <a href="http://weibo.com/arthinkingplus" target="_blank" rel="external">arthinking_plus</a><br>Posted in: <a href="http://www.itzhai.com" target="_blank" rel="external">http://www.itzhai.com</a></p>
</blockquote>
<p>##选择<br>选中： v<br>取消选择：再按一下v    </p>
<p>矩形选区：ctrl + v</p>
<p>全选：ggVG</p>
<p>###选中后的操作<br>d  删除<br>y  复制<br>p  粘贴<br>“+y<br>“+p</p>
<p>##复制<br>single line：yy<br>muitl line:nyy<br>copy block to destination:6,9 co 12    </p>
<p>##粘贴<br>paste：p    </p>
<p>##删除<br>x  删除一个字符<br>dd  删除一整行</p>
<p>##撤销<br>u</p>
<p>##重做<br>ctrl + r</p>
<p>##合并<br>J  合并两行    </p>
<p>##退出保存<br>ZZ    </p>
<p><a href="http://blog.csdn.net/ithomer/article/details/5929428" title="more" target="_blank" rel="external">more</a></p>

      
    </div>
    <footer class="article-footer">
        <div class="article-meta pull-left">
          
  

  <span class="post-categories">
    <i class="icon-categories"></i>
    <a href="/categories/IDE/">IDE</a>
  </span>


          
  

  <span class="post-tags">
    <i class="icon-tags"></i>
    <a href="/tags/VIM/">VIM</a>
  </span>


        </div>
        
    </footer>
  </div>
</article>



  <article class="post article">

  
  
    <h3 class="article-title"><a href="/database/mysql/emoji表情支持/"><span>MySQL emoji表情支持</span></a></h3>
  


  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/database/mysql/emoji表情支持/" rel="bookmark">
        <time class="entry-date published" datetime="2016-02-02T06:33:13.000Z">
          2016-02-02
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <blockquote>
<p>Author: ChinSyun Pang<br>Weibo: <a href="http://weibo.com/arthinkingplus" target="_blank" rel="external">arthinking_plus</a><br>Posted in: <a href="http://www.itzhai.com" target="_blank" rel="external">http://www.itzhai.com</a></p>
</blockquote>
<p>###1、数据库需要5.5.3+的支持</p>
<p>###2、修改database、table和column字符集<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">DATABASE</span> guitargg <span class="built_in">CHARACTER</span> <span class="keyword">SET</span> = utf8mb4 <span class="keyword">COLLATE</span> = utf8mb4_unicode_ci; </span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> gt_comment_content <span class="keyword">CONVERT</span> <span class="keyword">TO</span> <span class="built_in">CHARACTER</span> <span class="keyword">SET</span> utf8mb4 <span class="keyword">COLLATE</span> utf8mb4_unicode_ci;</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> gt_comment_content <span class="keyword">CHANGE</span> <span class="keyword">content</span> <span class="built_in">VARCHAR</span>(<span class="number">2000</span>) <span class="built_in">CHARACTER</span> <span class="keyword">SET</span> utf8mb4 <span class="keyword">COLLATE</span> utf8mb4_unicode_ci;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">VARIABLES</span> <span class="keyword">LIKE</span> <span class="string">'%char%'</span>;</span><br></pre></td></tr></table></figure></p>
<p>###3、修改配置文件<br>etc/mysql/my.cnf<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[client]</span><br><span class="line">default-character-set = utf8mb4</span><br><span class="line"></span><br><span class="line">[mysql]</span><br><span class="line">default-character-set = utf8mb4</span><br><span class="line"></span><br><span class="line">[mysqld]</span><br><span class="line">character-set-client-handshake = FALSE character-set-server = utf8mb4</span><br><span class="line">collation-server = utf8mb4_unicode_ci init_connect=&apos;SET NAMES utf8mb4&apos;</span><br></pre></td></tr></table></figure></p>
<p>###4、重启MySQL Server<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/mysql restart</span><br></pre></td></tr></table></figure></p>
<p>###5、升级JDBC驱动<br>确保mysql connector版本高于5.1.13</p>
<p>###6、检查应用的数据库连接配置：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">jdbc.driverClassName=com.mysql.jdbc.Driver</span><br><span class="line">jdbc.url=jdbc:mysql://localhost:3306/database?useUnicode=true&amp;characterEncoding=utf8&amp;autoReconnect=true&amp;rewriteBatchedStatements=TRUE jdbc.username=root</span><br><span class="line">jdbc.password=password</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p><a href="http://segmentfault.com/blog/ilikewhite/1190000000616820" title="mysql/Java服务端对emoji的支持" target="_blank" rel="external">mysql/Java服务端对emoji的支持</a></p>
</blockquote>

      
    </div>
    <footer class="article-footer">
        <div class="article-meta pull-left">
          
  

  <span class="post-categories">
    <i class="icon-categories"></i>
    <a href="/categories/Database/">Database</a>
  </span>


          
  

  <span class="post-tags">
    <i class="icon-tags"></i>
    <a href="/tags/MySQL/">MySQL</a>
  </span>


        </div>
        
    </footer>
  </div>
</article>



  <article class="post article">

  
  
    <h3 class="article-title"><a href="/database/mysql/mysql/"><span>MySQL 安装问题</span></a></h3>
  


  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/database/mysql/mysql/" rel="bookmark">
        <time class="entry-date published" datetime="2016-02-02T06:33:13.000Z">
          2016-02-02
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <blockquote>
<p>Author: ChinSyun Pang<br>Weibo: <a href="http://weibo.com/arthinkingplus" target="_blank" rel="external">arthinking_plus</a><br>Posted in: <a href="http://www.itzhai.com" target="_blank" rel="external">http://www.itzhai.com</a></p>
</blockquote>
<p>批量插入：</p>
<blockquote>
<p><a href="http://blog.sina.com.cn/s/blog_662e56ec0100jtg5.html" target="_blank" rel="external">http://blog.sina.com.cn/s/blog_662e56ec0100jtg5.html</a></p>
</blockquote>
<p><a href="http://www.euryugasaki.com/archives/853" target="_blank" rel="external">Mac下新安装的MySQL无法登陆root用户解决方法</a></p>
<p><a href="http://xiaorui.cc/2016/01/20/mac%E4%B8%8B%E5%AE%89%E8%A3%85mysql5-7%E9%81%87%E5%88%B0%E9%BB%98%E8%AE%A4%E5%AF%86%E7%A0%81%E7%9A%84%E5%A4%A7%E5%9D%91/" target="_blank" rel="external">mac下安装MySQL5.7遇到默认密码的大坑</a></p>

      
    </div>
    <footer class="article-footer">
        <div class="article-meta pull-left">
          
  

  <span class="post-categories">
    <i class="icon-categories"></i>
    <a href="/categories/Database/">Database</a>
  </span>


          
  

  <span class="post-tags">
    <i class="icon-tags"></i>
    <a href="/tags/MySQL/">MySQL</a>
  </span>


        </div>
        
    </footer>
  </div>
</article>



  <article class="post article">

  
  
    <h3 class="article-title"><a href="/database/mysql/海量数据架构/"><span>MySQL 海量数据架构</span></a></h3>
  


  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/database/mysql/海量数据架构/" rel="bookmark">
        <time class="entry-date published" datetime="2016-02-02T06:33:13.000Z">
          2016-02-02
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <blockquote>
<p>Author: ChinSyun Pang<br>Weibo: <a href="http://weibo.com/arthinkingplus" target="_blank" rel="external">arthinking_plus</a><br>Posted in: <a href="http://www.itzhai.com" target="_blank" rel="external">http://www.itzhai.com</a></p>
</blockquote>
<p>MySQL要存储大数据，一般都是按照分库分表的方式进行的，类似的<a href="http://www.lanceyan.com/category/tech/mongodb" title="MongoDB" target="_blank" rel="external">MongoDB</a>也是一样的。    </p>
<p>而淘宝版开源了一个数据库访问组件<a href="http://www.open-open.com/lib/view/open1393247567490.html" title="TDDL" target="_blank" rel="external">TDDL</a>，主要解决了分库分表对应用的透明化以及异构数据库之间的数据复制，它是一个基于集中式配置的JDBC datasource实现，具有主备份，读写分离，动态数据库配置等功能。</p>
<p>Cobar</p>
<p>MyCat</p>
<p><a href="http://my.oschina.net/tinyframework/blog/186583" title="数据库分区分片框架" target="_blank" rel="external">数据库分区分片框架</a></p>
<p>Github上看到了<a href="https://github.com/arthinking/kamike.divide" title="这个" target="_blank" rel="external">这个</a>开源的也不错。</p>
<p>Cobar</p>
<p>MyCat</p>

      
    </div>
    <footer class="article-footer">
        <div class="article-meta pull-left">
          
  

  <span class="post-categories">
    <i class="icon-categories"></i>
    <a href="/categories/Database/">Database</a>
  </span>


          
  

  <span class="post-tags">
    <i class="icon-tags"></i>
    <a href="/tags/MySQL/">MySQL</a>, <a href="/tags/高并发/">高并发</a>
  </span>


        </div>
        
    </footer>
  </div>
</article>



  <article class="post article">

  
  
    <h3 class="article-title"><a href="/Java/jdbc/20150116_数据库连接池/"><span>数据库连接池</span></a></h3>
  


  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/Java/jdbc/20150116_数据库连接池/" rel="bookmark">
        <time class="entry-date published" datetime="2016-02-02T06:33:13.000Z">
          2016-02-02
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <blockquote>
<p>Author: ChinSyun Pang<br>Weibo: <a href="http://weibo.com/arthinkingplus" target="_blank" rel="external">arthinking_plus</a><br>Posted in: <a href="http://www.itzhai.com" target="_blank" rel="external">http://www.itzhai.com</a></p>
</blockquote>
<p>###数据库连接池工具：<br>common-pool工具库是对池化技术原理的一种具体实现。    </p>
<p>apache的连接池工具库common-dbcp是common-pool在数据库访问方面的一个具体应用。</p>
<p><a href="http://macrochen.iteye.com/blog/320077" title="common-dbcp" target="_blank" rel="external">common-dbcp</a></p>

      
    </div>
    <footer class="article-footer">
        <div class="article-meta pull-left">
          
  

  <span class="post-categories">
    <i class="icon-categories"></i>
    <a href="/categories/JDBC/">JDBC</a>
  </span>


          
  

  <span class="post-tags">
    <i class="icon-tags"></i>
    <a href="/tags/数据库连接池/">数据库连接池</a>
  </span>


        </div>
        
    </footer>
  </div>
</article>



  <article class="post article">

  
  
    <h3 class="article-title"><a href="/cache/memcached/20141128_Memcached使用getMulti造成的性能问题/"><span>Memcached使用getMulti造成的性能问题</span></a></h3>
  


  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/cache/memcached/20141128_Memcached使用getMulti造成的性能问题/" rel="bookmark">
        <time class="entry-date published" datetime="2016-02-02T06:33:13.000Z">
          2016-02-02
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <blockquote>
<p>Author: ChinSyun Pang<br>Weibo: <a href="http://weibo.com/arthinkingplus" target="_blank" rel="external">arthinking_plus</a><br>Posted in: <a href="http://www.itzhai.com" target="_blank" rel="external">http://www.itzhai.com</a></p>
</blockquote>
<p>有这样一个场景：使用<code>getMulti</code>一次性读取一个系列的所有手机100个key，请求了100万次，系统最初只有一个MC服务器，随着访问量的增加，负载加大了，于是增加了几个MC服务器，但结果负载反而更加大了。</p>
<p>原因是开始那100个key在一台服务器上获取，现在分不到了几MC服务器，需要访问的服务器增多了，而关键性的因素是我们用到的MC客户端memcached-client，其中的AscIIClient如下：    </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title">getMulti</span><span class="params">(String[] keys, Integer[] hashCodes, <span class="keyword">boolean</span> asString)</span></span><br><span class="line">  </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> ((keys == <span class="keyword">null</span>) || (keys.length == <span class="number">0</span>)) &#123;</span><br><span class="line">      <span class="keyword">if</span> (log.isErrorEnabled())</span><br><span class="line">        log.error(<span class="string">"missing keys for getMulti()"</span>);</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Map cmdMap = <span class="keyword">new</span> HashMap();</span><br><span class="line">    String[] cleanKeys = <span class="keyword">new</span> String[keys.length];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; keys.length; i++) &#123;</span><br><span class="line">      String key = keys[i];</span><br><span class="line">      <span class="keyword">if</span> (key == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (log.isErrorEnabled())</span><br><span class="line">          log.error(<span class="string">"null key, so skipping"</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">      &#123;</span><br><span class="line">        Integer hash = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">if</span> ((hashCodes != <span class="keyword">null</span>) &amp;&amp; (hashCodes.length &gt; i)) &#123;</span><br><span class="line">          hash = hashCodes[i];</span><br><span class="line">        &#125;</span><br><span class="line">        cleanKeys[i] = key;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">          cleanKeys[i] = sanitizeKey(key);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (UnsupportedEncodingException e) &#123;</span><br><span class="line">          <span class="keyword">if</span> (<span class="keyword">this</span>.errorHandler != <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">this</span>.errorHandler.handleErrorOnGet(<span class="keyword">this</span>, e, key);</span><br><span class="line">          <span class="keyword">if</span> (log.isErrorEnabled())</span><br><span class="line">            log.error(<span class="string">"failed to sanitize your key!"</span>, e);</span><br><span class="line">          <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        SchoonerSockIO sock = <span class="keyword">this</span>.pool.getSock(cleanKeys[i], hash);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (sock == <span class="keyword">null</span>) &#123;</span><br><span class="line">          <span class="keyword">if</span> (<span class="keyword">this</span>.errorHandler != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">this</span>.errorHandler.handleErrorOnGet(<span class="keyword">this</span>, <span class="keyword">new</span> IOException(<span class="string">"no socket to server available"</span>), key);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">          <span class="keyword">if</span> (!cmdMap.containsKey(sock.getHost())) &#123;</span><br><span class="line">            cmdMap.put(sock.getHost(), <span class="keyword">new</span> StringBuilder(<span class="string">"get"</span>));</span><br><span class="line">          &#125;</span><br><span class="line">          ((StringBuilder)cmdMap.get(sock.getHost())).append(<span class="keyword">new</span> StringBuilder().append(<span class="string">" "</span>).append(cleanKeys[i]).toString());</span><br><span class="line"></span><br><span class="line">          sock.close();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (log.isDebugEnabled()) &#123;</span><br><span class="line">      log.debug(<span class="keyword">new</span> StringBuilder().append(<span class="string">"multi get socket count : "</span>).append(cmdMap.size()).toString());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Map ret = <span class="keyword">new</span> HashMap(keys.length);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">new</span> NIOLoader(<span class="keyword">this</span>).doMulti(asString, cmdMap, keys, ret);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; keys.length; i++)</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="keyword">if</span> ((!keys[i].equals(cleanKeys[i])) &amp;&amp; (ret.containsKey(cleanKeys[i]))) &#123;</span><br><span class="line">        ret.put(keys[i], ret.get(cleanKeys[i]));</span><br><span class="line">        ret.remove(cleanKeys[i]);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (log.isDebugEnabled())</span><br><span class="line">      log.debug(<span class="keyword">new</span> StringBuilder().append(<span class="string">"++++ memcache: got back "</span>).append(ret.size()).append(<span class="string">" results"</span>).toString());</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>请求多台服务器是串行的，结果导致客户端操作时间累加，请求堆积，最终导致性能下降。</p>
<h2 id="解决方法有两个："><a href="#解决方法有两个：" class="headerlink" title="解决方法有两个："></a>解决方法有两个：</h2><p>一是把串行请求改为并行请求，可以参考spymemcached的并行实现：    </p>
<ul>
<li>第一步，将本次操作构造成一个针对每个 node 的 Operation 对象，加入连接对象中；    </li>
<li>第二步，在连接对象中，将所有的 node 操作放入 addedQueue 队列，然后触发 Selector 方式异步非阻塞的执行；</li>
</ul>
<p>一是把key根据一个系列的手机散列不同的MC服务器上，这样就达到请求一台服务器获取所有的内容了，不过根据就不同的业务场景散列方法也不同，比较不好处理。</p>
<p>或者不使用getMulti这个方法了</p>
<p>必须使用getMulti方法的时候可以把缓存数据复制到另一个memcache集群上，一个集群负责读取一半的keys，但是又会引发需要更多的CPU的问题。</p>
<p><a href="http://www.cnblogs.com/zhengyun_ustc/p/multigethole.html" title="旁观者的博客" target="_blank" rel="external">旁观者的博客</a>也分析了这类分析，很透彻，提供给大家参考下</p>
<p>该博文发表于：<a href="http://www.itzhai.com/mc-use-getmulti-problem.html" target="_blank" rel="external">http://www.itzhai.com/mc-use-getmulti-problem.html</a></p>

      
    </div>
    <footer class="article-footer">
        <div class="article-meta pull-left">
          
  

  <span class="post-categories">
    <i class="icon-categories"></i>
    <a href="/categories/Cache/">Cache</a>
  </span>


          
  

  <span class="post-tags">
    <i class="icon-tags"></i>
    <a href="/tags/Memcached/">Memcached</a>
  </span>


        </div>
        
    </footer>
  </div>
</article>



  <article class="post article">

  
  
    <h3 class="article-title"><a href="/javascript/seajs/"><span></span></a></h3>
  


  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/javascript/seajs/" rel="bookmark">
        <time class="entry-date published" datetime="2016-02-02T06:33:13.000Z">
          2016-02-02
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <p>在使用spm之前，首先得安装nodejs，因为spm是nodejs的一个package。<a href="http://qianduanblog.com/post/js-learning-42-using-spm-3-build-seajs-project.html" title="使用spm@3构建seajs项目" target="_blank" rel="external">使用spm@3构建seajs项目</a></p>
<p><a href="http://spmjs.io/documentation" title="spm 3官方教程" target="_blank" rel="external">spm 3官方教程</a></p>
<p>构建目录：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">dist  构建目标文件夹</span><br><span class="line">examples  相关使用文档</span><br><span class="line">spm_modules   依赖的js文件仓库，spm install的时候下载到里面</span><br><span class="line">tests  测试案例</span><br><span class="line">xx.js  </span><br><span class="line">package.json  spm维护的依赖配置文件，用于生产dist目录的相关配置</span><br></pre></td></tr></table></figure></p>
<p><a href="http://spmjs.io/package/expect.js" title="expectjs" target="_blank" rel="external">expectjs</a></p>
<p><a href="http://chaoskeh.com/blog/why-its-hard-to-combo-seajs-modules.html" title="为什么 SeaJS 模块的合并这么麻烦" target="_blank" rel="external">为什么 SeaJS 模块的合并这么麻烦</a></p>
<p>###安装nodejs</p>
<p><a href="http://seajs.org/docs/#docs" title="seajs" target="_blank" rel="external">seajs</a></p>
<p>配置NODE_PATH</p>
<p><a href="http://segmentfault.com/blog/yinchangsheng/1190000002478924" title="nodejs 中的 NODE_PATH" target="_blank" rel="external">nodejs 中的 NODE_PATH</a></p>
<p>windows下需要安装<a href="http://gnuwin32.sourceforge.net/packages/make.htm" title="make" target="_blank" rel="external">make</a></p>
<p>下载<a href="https://github.com/seajs/examples" title="demo" target="_blank" rel="external">demo</a>编译执行</p>
<p>SeaJS遵循<a href="https://github.com/cmdjs/specification/blob/master/draft/module.md" title="CMD" target="_blank" rel="external">CMD</a>规范，一个模块就是一个文件，通过<code>require</code> 关键词引入外部模块，每次加载需要直接使用到的模块的时候，模块内部 <code>require</code> 进来的js也会一并加载，为了让SeaJS在加载之前把所有相关联的JS都能够通过一个JS文件一次性加载进来，就需要用到SeaJS的<a href="http://www.zhihu.com/question/20789867/answer/16187950" title="Transport" target="_blank" rel="external">Transport</a>格式<br>没转换前Modules/Wrappingsgui规范格式如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">define(function(require, exports, module) &#123;</span><br><span class="line">   var a = require(&quot;a&quot;)</span><br><span class="line">   exports.foo = ...</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>CMD模块在正式上线前，通过构建工具（如SPM）先转换为Modules/Transport格式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">define(&quot;id&quot;, [&quot;dep-1&quot;, &quot;dep-2&quot;], function(require, exports, module) &#123;</span><br><span class="line">   // source code</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>进一步通过构建工具，就可以一并吧 <code>require</code> 引入进来的模块一起压缩合并到同一个文件中了。</p>
<p>##说明<br>简单来说，通过使用SeaJS，我们可以把JS代码模块化，在上线之前，通过spm这样的构建工具，把自己开发的模块压缩合并，当成SeaJS的一个模块来使用。</p>
<p>##Step by step</p>
<p>下面一步一步来实现这个过程：</p>
<p>##正面项目接口</p>
<p>整体目录结构如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">project   // 项目跟目录 </span><br><span class="line">|</span><br><span class="line">|-assets  // web资源文件</span><br><span class="line">  |</span><br><span class="line">  |- sea-modules  // SeaJS相关模块</span><br><span class="line">  |  </span><br><span class="line">  |- static  // 模块开发路径</span><br><span class="line">  |   |</span><br><span class="line">  |   |- first-module</span><br><span class="line">  |       |- dist  // 我的模块构建目标文件夹</span><br><span class="line">  |       |- src  // 我的模块开发文件夹</span><br><span class="line">  |       |- package.json  // spm编译配置</span><br><span class="line">  |</span><br><span class="line">  |- app  // 我的模块使用例子</span><br><span class="line">  |</span><br></pre></td></tr></table></figure></p>
<p>##创建目录结构</p>
<p>###step1、创建项目 project</p>
<p>###step2、创建web资源文件夹<br>在project里面新建一个assetsweb资源文件夹，专门用来存放JS，CSS等资源，我们的模块开发就在这个目录下面进行</p>
<p>###step3、在assets下面创建sea-modules文件夹<br>这个文件夹是用来存放SeaJS模块的，我们需要用到的模块，包括自己实现的模块最终都要存放到这里</p>
<p>###step4、在assets目录下创建 static 文件夹<br>这个文件夹用于模块开发</p>
<p>###step5、在 static 目录下创建 first-module 文件夹<br>这个文件夹用于存储我的第一个模块的开发代码</p>
<p>###step6、在 first-module 目录下创建 src 目录，这个目录用于存放我们模块开发的代码</p>
<p>###step7、在assets下面创建 app 文件夹<br>这个文件夹存放我们演示调用模块代码的HTML文件</p>
<p>##使用spm初始化构建</p>
<p>###首先你需要通过npm安装spm，而npm是Node.js里面的一个工具，所以你需要先这样搭建环境：</p>
<ul>
<li>安装<a href="http://nodejs.org/" title="Node.js" target="_blank" rel="external">Node.js</a></li>
<li>安装spm<br>目前最新的是3版本的，建议安装最新的，详细可以参考官方文档：<br><a href="http://spmjs.io/documentation/getting-started" title="spmjs.io" target="_blank" rel="external">http://spmjs.io/</a><br>这里只要在cmd里面执行以下一句就可以了</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install spm -g</span><br></pre></td></tr></table></figure>
<ul>
<li>使用spm初始化项目目录</li>
</ul>
<p>在first-module目录下执行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spm init</span><br></pre></td></tr></table></figure>
<p>接下来按照提示分表填写 Package name, Version, Description, Author即可。</p>
<p>执行完之后生成如下目录：<br><img src="" alt=""></p>
<p>接下来就可以开始开发自己的模块了。</p>
<p>##模块开发</p>
<p>###编辑我们自己的模块代码<br>在src目录下创建我们的模块代码 index.js</p>
<p><a href="http://blog.csdn.net/huyoo/article/details/21703701" target="_blank" rel="external">http://blog.csdn.net/huyoo/article/details/21703701</a></p>

      
    </div>
    <footer class="article-footer">
        <div class="article-meta pull-left">
          
          
        </div>
        
    </footer>
  </div>
</article>




<nav class="pagination">
  
  <a href="/page/5/" class="pagination-prev">Prev</a>
  
  
  <a href="/page/7/" class="pagination-next">Next</a>
  
</nav>
      </main>
    </article>

    <footer id="colophon" class="site-footer" role="contentinfo"><p class="site-info">
  Proudly powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and
  Theme by <a href="https://github.com/CodeDaraW/Hacker" target="_blank">Hacker</a>
  </br>
  
  &copy; 2016 arthinking
  
</p>
</footer>
    
  </div>
</div>
</body>
</html>