<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Page 6 | arthinking | ChinSyun Pang&#39;s blog</title>
  <meta name="author" content="arthinking">
  
  <meta name="description" content="Struggle for HighPay zoom.">
  
  

  <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  
  <meta property="og:site_name" content="arthinking"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.ico" rel="icon">
  <link rel="alternate" href="/atom.xml" title="arthinking" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
</head>


<body>
<div id="page" class="site">
  <div id="primary" class="content-area">

    <header id="header" class="inner"><div class="site-branding">
  <h1 class="site-title">
    <a href="/">arthinking</a>
  </h1>
  <p class="site-description">ChinSyun Pang&#39;s blog</p>
</div>
<nav id="site-navigation" class="main-navigation" role="navigation">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
  </ul>
</nav></header>

    <article id="content" class="site-content">
      <main id="main" class="site-main posts-loop" role="main">
        
  <article class="post article">

  
  
    <h3 class="article-title"><a href="/2016/02/04/Maven插件编译问题/"><span>Maven插件编译问题</span></a></h3>
  


  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2016/02/04/Maven插件编译问题/" rel="bookmark">
        <time class="entry-date published" datetime="2016-02-04T08:49:07.000Z">
          2016-02-04
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <blockquote>
<p>Author: ChinSyun Pang<br>Weibo: <a href="http://weibo.com/arthinkingplus" target="_blank" rel="external">arthinking_plus</a><br>Posted in: </p>
</blockquote>
<h1 id="Maven插件编译问题"><a href="#Maven插件编译问题" class="headerlink" title="Maven插件编译问题"></a>Maven插件编译问题</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TestService testService = serviceFactory.getService(ServiceType.testServiceClazz);</span><br></pre></td></tr></table></figure>
<p>maven compile 报如下错误：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[ERROR] /xxx.java:[100，20] xxx.java:106: 不兼容的类型找到： java.lang.Object需要： TestService[INFO] 1 error</span><br></pre></td></tr></table></figure>
<p>而以下代码则不会报错：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TestService testService = serviceFactory.getService(TestService.class);</span><br></pre></td></tr></table></figure>
<p>其中getService()方法如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span>&lt;T&gt; T <span class="title">getService</span><span class="params">(Class&lt;T&gt; class)</span></span>&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>可以发现，报错的代码，传入的Class是动态的，这是导致Maven编译报错的原因。</p>
<p>查看下项目的maven-compiler-plugin插件配置：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span>  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">source</span>&gt;</span>1.6<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">target</span>&gt;</span>1.6<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">showWarnings</span>&gt;</span>flase<span class="tag">&lt;/<span class="name">showWarnings</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>可以发现我们并没有为maven指定其他的JDT(Java Development Tools)，使用的是默认的javac进行编译。而我们在Eclipse里面使用的是自带的JDT，编译没有问题。可见，javac的检查机制更加严格，导致Eclipse可以编译通过的，用Maven编译会报错。在用Maven编译的时候要注意下这点哦。</p>
<p>##Reference</p>
<p><a href="https://maven.apache.org/plugins/" target="_blank" rel="external">maven插件列表</a></p>
<p><a href="http://blog.csdn.net/liushuijinger/article/details/44618557" target="_blank" rel="external">maven编译问题</a></p>
<p><a href="http://help.eclipse.org/mars/index.jsp?topic=%2Forg.eclipse.jdt.doc.isv%2Fguide%2Fjdt_api_compile.htm" target="_blank" rel="external">Compiling Java code</a></p>
<p><a href="http://blog.csdn.net/feng2007110221053/article/details/7311056" target="_blank" rel="external">关于Eclipse和Javac编译结果不一致的问题分析与解决</a></p>
<p><a href="http://stackoverflow.com/questions/3061654/what-is-the-difference-between-javac-and-the-eclipse-compiler" target="_blank" rel="external">What is the difference between javac and the Eclipse compiler?</a></p>

      
    </div>
    <footer class="article-footer">
        <div class="article-meta pull-left">
          
  

  <span class="post-categories">
    <i class="icon-categories"></i>
    <a href="/categories/Java/">Java</a>, <a href="/categories/Java/Maven/">Maven</a>
  </span>


          
  

  <span class="post-tags">
    <i class="icon-tags"></i>
    <a href="/tags/Maven/">Maven</a>
  </span>


        </div>
        
    </footer>
  </div>
</article>



  <article class="post article">

  
  
    <h3 class="article-title"><a href="/IDE/IntelliJ IDEA/2016-02-03 IntelliJ IDEA系列1/"><span>INtelliJ IDEA系列1</span></a></h3>
  


  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/IDE/IntelliJ IDEA/2016-02-03 IntelliJ IDEA系列1/" rel="bookmark">
        <time class="entry-date published" datetime="2016-02-03T04:35:11.000Z">
          2016-02-03
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <blockquote>
<p>Author: ChinSyun Pang<br>Weibo: <a href="http://weibo.com/arthinkingplus" target="_blank" rel="external">arthinking_plus</a><br>Posted in: <a href="http://www.itzhai.com" target="_blank" rel="external">http://www.itzhai.com</a></p>
</blockquote>
<h2 id="修改主题"><a href="#修改主题" class="headerlink" title="修改主题"></a>修改主题</h2><p>IntelliJ IDEA对目录做了调整，把偏好设置调整到了如下目录：</p>
<p>IntelliJ IDEA –&gt; preferences(快捷键：⌘,) –&gt; Appearance &amp; Behavior –&gt; Appearance –&gt; UI Options –&gt; Theme</p>
<p>旧版本的可以在<code>file --&gt; Settings中找到</code>。</p>
<h2 id="编译"><a href="#编译" class="headerlink" title="编译"></a>编译</h2><p>有如下三种编译：</p>
<ul>
<li>Compile</li>
</ul>
<p>对特定的代码文件进行强制编译；</p>
<ul>
<li>Rebuild</li>
</ul>
<p>对选择的project进行强制编译；</p>
<ul>
<li>Make</li>
</ul>
<p>对选定的Project或者Module进行编译，只编译改动过的文件；</p>
<p><code>shift + command + F9</code>  compile one class.</p>
<h3 id="Run配置"><a href="#Run配置" class="headerlink" title="Run配置"></a>Run配置</h3><p>Run –&gt; Edit Configurations</p>
<h2 id="项目结构设置"><a href="#项目结构设置" class="headerlink" title="项目结构设置"></a>项目结构设置</h2><p>file –&gt; project structrue(快捷键：⌘;)<br>可以在这里管理SDK版本(Platform Settings –&gt; SDKs)，设置项目SDK(Project Settings –&gt; Project)。</p>
<h3 id="language-level"><a href="#language-level" class="headerlink" title="language level"></a>language level</h3><p>对于大型项目，各个 Module 用到的 SDK 和 language level 很有可能是各不一样的，IntelliJ IDEA 对此也进行了支持。(Project Settings –&gt; Modules –&gt; Sources –&gt; Lauguage Level…)</p>
<h2 id="编辑"><a href="#编辑" class="headerlink" title="编辑"></a>编辑</h2><h3 id="实时代码模板"><a href="#实时代码模板" class="headerlink" title="实时代码模板"></a>实时代码模板</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">IntelliJ IDEA --&gt; Editor --&gt; Live Template</span><br></pre></td></tr></table></figure>
<p>提示快捷键：<code>Tab</code> 和 <code>Ctrl + J</code></p>
<h3 id="文件代码模板"><a href="#文件代码模板" class="headerlink" title="文件代码模板"></a>文件代码模板</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Prefrences --&gt; Editor --&gt; File and code Template</span><br></pre></td></tr></table></figure>
<p>IntelliJ IDEA 的文件代码模板是可以用Velocity Template Language进行书写的；</p>
<h3 id="Emmet的使用"><a href="#Emmet的使用" class="headerlink" title="Emmet的使用"></a>Emmet的使用</h3><p>该工具常用于前端代码的自动生成；</p>
<h3 id="Postfix-Completion的使用"><a href="#Postfix-Completion的使用" class="headerlink" title="Postfix Completion的使用"></a>Postfix Completion的使用</h3><p>代码模板的自动补全功能</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Preferences --&gt; Editor --&gt; General --&gt; Postfix Completion</span><br></pre></td></tr></table></figure>
<h2 id="插件讲解"><a href="#插件讲解" class="headerlink" title="插件讲解"></a>插件讲解</h2><p><a href="https://plugins.jetbrains.com/" target="_blank" rel="external">官方插件库</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Preferences --&gt; Plugins</span><br></pre></td></tr></table></figure></p>
<h2 id="Eclipse的Java-Web项目环境搭建"><a href="#Eclipse的Java-Web项目环境搭建" class="headerlink" title="Eclipse的Java Web项目环境搭建"></a>Eclipse的Java Web项目环境搭建</h2><h2 id="Maven项目介绍"><a href="#Maven项目介绍" class="headerlink" title="Maven项目介绍"></a>Maven项目介绍</h2><h2 id="Debug讲解"><a href="#Debug讲解" class="headerlink" title="Debug讲解"></a>Debug讲解</h2><h2 id="重构讲解"><a href="#重构讲解" class="headerlink" title="重构讲解"></a>重构讲解</h2><h2 id="数据库管理工具"><a href="#数据库管理工具" class="headerlink" title="数据库管理工具"></a>数据库管理工具</h2><h2 id="IntelliJ-IDEA常用设置"><a href="#IntelliJ-IDEA常用设置" class="headerlink" title="IntelliJ IDEA常用设置"></a>IntelliJ IDEA常用设置</h2><h2 id="IntelliJ-IDEA常用快捷键讲解（Win-Linux）"><a href="#IntelliJ-IDEA常用快捷键讲解（Win-Linux）" class="headerlink" title="IntelliJ IDEA常用快捷键讲解（Win + Linux）"></a>IntelliJ IDEA常用快捷键讲解（Win + Linux）</h2><h2 id="IntelliJ-IDEA常用快捷键讲解（Mac）"><a href="#IntelliJ-IDEA常用快捷键讲解（Mac）" class="headerlink" title="IntelliJ IDEA常用快捷键讲解（Mac）"></a>IntelliJ IDEA常用快捷键讲解（Mac）</h2><h2 id="IntelliJ-IDEA的Java热部署插件JRebel安装及使用"><a href="#IntelliJ-IDEA的Java热部署插件JRebel安装及使用" class="headerlink" title="IntelliJ IDEA的Java热部署插件JRebel安装及使用"></a>IntelliJ IDEA的Java热部署插件JRebel安装及使用</h2><h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><p><a href="https://github.com/judasn/IntelliJ-IDEA-Tutorial" target="_blank" rel="external">https://github.com/judasn/IntelliJ-IDEA-Tutorial</a></p>
<p><a href="http://wiki.jikexueyuan.com/project/intellij-idea-tutorial/" target="_blank" rel="external">IntelliJ IDEA使用教程</a></p>

      
    </div>
    <footer class="article-footer">
        <div class="article-meta pull-left">
          
  

  <span class="post-categories">
    <i class="icon-categories"></i>
    <a href="/categories/IDE/">IDE</a>
  </span>


          
  

  <span class="post-tags">
    <i class="icon-tags"></i>
    <a href="/tags/IntelliJ-IDEA/">IntelliJ IDEA</a>
  </span>


        </div>
        
    </footer>
  </div>
</article>



  <article class="post article">

  
  
    <h3 class="article-title"><a href="/operating-system/mac/2016-02-02 Mac实用工具安装/"><span>Mac实用工具</span></a></h3>
  


  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/operating-system/mac/2016-02-02 Mac实用工具安装/" rel="bookmark">
        <time class="entry-date published" datetime="2016-02-02T11:41:42.000Z">
          2016-02-02
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <blockquote>
<p>Author: ChinSyun Pang<br>Weibo: <a href="http://weibo.com/arthinkingplus" target="_blank" rel="external">arthinking_plus</a><br>Posted in: <a href="http://www.itzhai.com" target="_blank" rel="external">http://www.itzhai.com</a></p>
</blockquote>
<h1 id="Mac实用工具安装"><a href="#Mac实用工具安装" class="headerlink" title="Mac实用工具安装"></a>Mac实用工具安装</h1><h2 id="安装程序"><a href="#安装程序" class="headerlink" title="安装程序"></a>安装程序</h2><h3 id="安装maven"><a href="#安装maven" class="headerlink" title="安装maven"></a><a href="http://wlb.wlb.blog.163.com/blog/static/46741320154215621382/" target="_blank" rel="external">安装maven</a></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo tar -zxvf 压缩文件名.tar.gz -C /usr/local/maven</span><br></pre></td></tr></table></figure>
<h3 id="安装MySQL"><a href="#安装MySQL" class="headerlink" title="安装MySQL"></a>安装MySQL</h3><p><a href="http://www.cnblogs.com/macro-cheng/archive/2011/10/25/mysql-001.html" target="_blank" rel="external">MAC下安装与配置MySQL</a></p>
<p><a href="http://www.cnblogs.com/TsengYuen/archive/2012/01/11/2318920.html" target="_blank" rel="external">如何在Mac OS X中安装MySQL</a></p>
<h3 id="安装Tomcat"><a href="#安装Tomcat" class="headerlink" title="安装Tomcat"></a>安装Tomcat</h3><p><a href="http://blog.csdn.net/huyisu/article/details/38372663" target="_blank" rel="external">在mac系统安装Apache Tomcat的详细步骤</a></p>
<h3 id="安装Nginx"><a href="#安装Nginx" class="headerlink" title="安装Nginx"></a>安装Nginx</h3><h3 id="安装Memcached"><a href="#安装Memcached" class="headerlink" title="安装Memcached"></a>安装Memcached</h3><h3 id="安装-MySQL客户端"><a href="#安装-MySQL客户端" class="headerlink" title="安装 MySQL客户端"></a>安装 MySQL客户端</h3><h3 id="安装office"><a href="#安装office" class="headerlink" title="安装office"></a>安装office</h3><h3 id="SecureCRT"><a href="#SecureCRT" class="headerlink" title="SecureCRT"></a>SecureCRT</h3><p><a href="http://bbs.feng.com/read-htm-tid-5100374.html" target="_blank" rel="external">Mac下面的SecureCRT(附破解方案) 更新到最新的7.2的破解方案</a></p>
<h3 id="brew"><a href="#brew" class="headerlink" title="brew"></a>brew</h3><p>安装命令如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -LsSf http://github.com/mxcl/homebrew/tarball/master | sudo tar xvz -C/usr/<span class="built_in">local</span> --strip 1</span><br></pre></td></tr></table></figure>
<p>当brew安装成功后，就可以随意安装自己想要的软件了，例如wget，命令如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo brew install wget</span><br></pre></td></tr></table></figure>
<p>卸载的话，命令如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo brew uninstall wget</span><br></pre></td></tr></table></figure>
<p>查看安装软件的话，命令如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo brew search /apache*/</span><br></pre></td></tr></table></figure>
<p>注意/apache*/是使用的正则表达式，用/分割。</p>
<h3 id="nginx"><a href="#nginx" class="headerlink" title="nginx"></a>nginx</h3><blockquote>
<p>1、brew search nginx<br>2、brew install nginx</p>
</blockquote>
<p>启动nginx ，sudo nginx ;访问localhost:8080 发现已出现nginx的欢迎页面了。</p>
<blockquote>
<p>备注： ln -s  /usr/local/sbin/nginx /usr/bin/nginx 做个软连接。</p>
</blockquote>
<p>常用的指令有： </p>
<blockquote>
<p>nginx -V 查看版本，以及配置文件地址<br>nginx -v 查看版本<br>nginx -c filename 指定配置文件<br>nginx -h 帮助</p>
</blockquote>
<p>重新加载配置|重启|停止|退出 nginx</p>
<blockquote>
<p>nginx -s reload|reopen|stop|quit</p>
</blockquote>
<p>打开 nginx</p>
<blockquote>
<p>sudo nginx</p>
</blockquote>
<p>测试配置是否有语法错误</p>
<blockquote>
<p>nginx -t</p>
</blockquote>
<h3 id="其他实用工具"><a href="#其他实用工具" class="headerlink" title="其他实用工具"></a>其他实用工具</h3><ul>
<li><a href="https://wudi.in/archives/317.html" target="_blank" rel="external">Dash for Mac</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
        <div class="article-meta pull-left">
          
  

  <span class="post-categories">
    <i class="icon-categories"></i>
    <a href="/categories/Mac/">Mac</a>
  </span>


          
        </div>
        
    </footer>
  </div>
</article>



  <article class="post article">

  
  
    <h3 class="article-title"><a href="/Java/2014120801_JVM笔记 - 高效并发（线程安全与锁优化）/"><span>JVM笔记 - 高效并发（线程安全与锁优化）</span></a></h3>
  


  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/Java/2014120801_JVM笔记 - 高效并发（线程安全与锁优化）/" rel="bookmark">
        <time class="entry-date published" datetime="2016-02-02T06:33:13.000Z">
          2016-02-02
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <blockquote>
<p>Author: ChinSyun Pang<br>Weibo: <a href="http://weibo.com/arthinkingplus" target="_blank" rel="external">arthinking_plus</a><br>Posted in: <a href="http://www.itzhai.com" target="_blank" rel="external">http://www.itzhai.com</a></p>
</blockquote>
<p>#1、概述</p>
<p>#2、线程安全</p>
<p>##2.1、Java语言中的线程安全<br>按照线程安全的“安全程度”由强至弱来排序，我们可以将Java语言中各种操作共享的数据分为以下5类：不可变、绝对线程安全、相对线程安全、线程建荣和线程对立。</p>
<p>###不可变</p>
<p>不可变的对象一定是线程安全的。</p>
<p>保证对象行为不影响自己状态的途径有很多种，其中最简单的就是把对象中带有状态的变量都声明为final。</p>
<p>Java API中符合不可变要求的类型：String，java.lang.Number的部分子类（如Long和Double的数值包装类，BigInteger和BigDecimal等大数据类型但<code>AtomicInteger</code>和<code>AtomicLong</code>则并非不可变的）。</p>
<p>###绝对线程安全<br>Java API中标注自己是线程安全的类，大多数都不是绝对线程安全的。</p>
<p>###相对线程安全<br>Java语言中，大部分的线程安全都属于这种类型，例如Vector，HashTable，Collections的synchronizedCollection()方法包装的集合等。</p>
<p>###线程兼容<br>指通过使用同步手段来保证对象在并发环境中可以安全的使用。Java API中大部分的类都是属于线程兼容的，如ArrayList和HashMap。</p>
<p>###线程对立<br>指无论调用端是否采取了同步措施，都无法在多线程环境中并发使用的代码。</p>
<p>一个线程对立的例子就是Thread类的suspend()和resumn()方法（已被JDK声明废弃了）。</p>
<p>常见的线程对立操作还有System.setIn(), System.setOut(), System.runFinalizersOnExit()…</p>
<p>##2.2、线程安全的实现方法</p>
<p>###互斥同步<br>Java中，最基本的互斥同步手段就是synchronized关键字。</p>
<p>synchronized是一个重量级的操作，因为：Java的线程是映射到操作系统的原生线程之上的，如果要阻塞或唤醒一个线程，都需要操作系统来帮忙完成，这就需要从用户态转换到核心态中，因此状态转换需要消耗很多的处理器时间。对于代码简单的同步块（如synchronized修饰的getter()和setter方法），状态转换消耗的时间有可能比用户代码执行的时间还要长。</p>
<p>还可以使用java.util.concurrent包中的<code>ReentrantLock(重入锁)</code>来实现同步：JDK1.5多线程环境下synchronized的吞吐量下降的很严重，而ReentrantLock则基本保持在同一个比较稳定的水平上。JDK 1.6之后两者性能基本持平。</p>
<p>虚拟机在未来的性能改进中还会更偏向于原生的synchronize的，所以还是<br>提倡在synchronized能实现需求的情况下，优先考虑使用synchronized来进行同步。</p>
<p>###非阻塞同步<br>非阻塞同步：从处理问题的方式上说，互斥同步属于一种悲观的并发策略。随着硬件指令集的发展，我们可以采用基于冲突检查的乐观并发策略，通俗地说，就是先行操作，如果没有其他线程争用共享数据，那操作就成功了；如果共享数据有争用，产生了冲突，那就再采取其他的补偿措施（最常见的补偿措施就是不断地重试，直到成功为止），这种乐观的并发策略的许多实现偶读不需要把线程挂起，因此这话总同步操作称为非阻塞同步。</p>
<p>###无同步方案<br>如果一个方法本来就不设计共享数据，那它自然就无须任何同步措施去保证正确性，因此会有一些代码天生就是线程安全的。这类代码包括：可重入代码和线程本地存储。</p>
<p>#3、锁优化<br>为了进一步改进高效并发，HotSpot虚拟机开发团队在JDK1.6版本上花费了大量精力实现各种锁优化。</p>
<p>##3.1、自旋锁与自适应自旋<br>为了让线程等待，我们只需要让线程执行一个忙循环（自旋），这项技术就是所谓的自旋锁。引入自旋锁的原因是互斥同步对性能最大的影响是阻塞的实现，管钱线程和恢复线程的操作都需要转入内核态中完成，给并发带来很大压力。自旋锁让物理机器有一个以上的处理器的时候，能让两个或以上的线程同时并行执行。</p>
<p>##3.2、锁消除<br>消除锁是指虚拟机即时编译器在运行时，对一些代码上要求同步，但是被检测到不可能存在共享数据竞争的锁进行消除。</p>
<p>##3.3、锁粗化<br>如果一系列的连续操作都对同一个对象反复加锁和解锁，甚至加锁操作是出现在循环体中的，则可以进行锁粗化的优化。</p>
<p>##3.4、轻量级锁<br>它的本意是在没有多线程竞争的前提下，减少传统的重量级锁使用操作系统互斥量产生的性能消耗。</p>
<p>但是如果存在锁竞争，除了互斥量的开销，还发生了CAS操作，因此在有竞争的情况下，轻量级锁会比传统的重量级锁更慢。</p>
<p>##3.5、偏向锁<br>如果说轻量级锁是在无竞争的情况下使用了CAS操作去消除同步使用的互斥量，那偏向锁就是在无竞争的情况下把整个同步都消除掉了，连CAS操作都不做了。</p>
<p>#4、本章小结</p>

      
    </div>
    <footer class="article-footer">
        <div class="article-meta pull-left">
          
  

  <span class="post-categories">
    <i class="icon-categories"></i>
    <a href="/categories/JVM/">JVM</a>
  </span>


          
        </div>
        
    </footer>
  </div>
</article>



  <article class="post article">

  
  
    <h3 class="article-title"><a href="/cache/memcached/20141128_Memcached使用getMulti造成的性能问题/"><span>Memcached使用getMulti造成的性能问题</span></a></h3>
  


  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/cache/memcached/20141128_Memcached使用getMulti造成的性能问题/" rel="bookmark">
        <time class="entry-date published" datetime="2016-02-02T06:33:13.000Z">
          2016-02-02
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <blockquote>
<p>Author: ChinSyun Pang<br>Weibo: <a href="http://weibo.com/arthinkingplus" target="_blank" rel="external">arthinking_plus</a><br>Posted in: <a href="http://www.itzhai.com" target="_blank" rel="external">http://www.itzhai.com</a></p>
</blockquote>
<p>有这样一个场景：使用<code>getMulti</code>一次性读取一个系列的所有手机100个key，请求了100万次，系统最初只有一个MC服务器，随着访问量的增加，负载加大了，于是增加了几个MC服务器，但结果负载反而更加大了。</p>
<p>原因是开始那100个key在一台服务器上获取，现在分不到了几MC服务器，需要访问的服务器增多了，而关键性的因素是我们用到的MC客户端memcached-client，其中的AscIIClient如下：    </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title">getMulti</span><span class="params">(String[] keys, Integer[] hashCodes, <span class="keyword">boolean</span> asString)</span></span><br><span class="line">  </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> ((keys == <span class="keyword">null</span>) || (keys.length == <span class="number">0</span>)) &#123;</span><br><span class="line">      <span class="keyword">if</span> (log.isErrorEnabled())</span><br><span class="line">        log.error(<span class="string">"missing keys for getMulti()"</span>);</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Map cmdMap = <span class="keyword">new</span> HashMap();</span><br><span class="line">    String[] cleanKeys = <span class="keyword">new</span> String[keys.length];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; keys.length; i++) &#123;</span><br><span class="line">      String key = keys[i];</span><br><span class="line">      <span class="keyword">if</span> (key == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (log.isErrorEnabled())</span><br><span class="line">          log.error(<span class="string">"null key, so skipping"</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">      &#123;</span><br><span class="line">        Integer hash = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">if</span> ((hashCodes != <span class="keyword">null</span>) &amp;&amp; (hashCodes.length &gt; i)) &#123;</span><br><span class="line">          hash = hashCodes[i];</span><br><span class="line">        &#125;</span><br><span class="line">        cleanKeys[i] = key;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">          cleanKeys[i] = sanitizeKey(key);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (UnsupportedEncodingException e) &#123;</span><br><span class="line">          <span class="keyword">if</span> (<span class="keyword">this</span>.errorHandler != <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">this</span>.errorHandler.handleErrorOnGet(<span class="keyword">this</span>, e, key);</span><br><span class="line">          <span class="keyword">if</span> (log.isErrorEnabled())</span><br><span class="line">            log.error(<span class="string">"failed to sanitize your key!"</span>, e);</span><br><span class="line">          <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        SchoonerSockIO sock = <span class="keyword">this</span>.pool.getSock(cleanKeys[i], hash);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (sock == <span class="keyword">null</span>) &#123;</span><br><span class="line">          <span class="keyword">if</span> (<span class="keyword">this</span>.errorHandler != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">this</span>.errorHandler.handleErrorOnGet(<span class="keyword">this</span>, <span class="keyword">new</span> IOException(<span class="string">"no socket to server available"</span>), key);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">          <span class="keyword">if</span> (!cmdMap.containsKey(sock.getHost())) &#123;</span><br><span class="line">            cmdMap.put(sock.getHost(), <span class="keyword">new</span> StringBuilder(<span class="string">"get"</span>));</span><br><span class="line">          &#125;</span><br><span class="line">          ((StringBuilder)cmdMap.get(sock.getHost())).append(<span class="keyword">new</span> StringBuilder().append(<span class="string">" "</span>).append(cleanKeys[i]).toString());</span><br><span class="line"></span><br><span class="line">          sock.close();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (log.isDebugEnabled()) &#123;</span><br><span class="line">      log.debug(<span class="keyword">new</span> StringBuilder().append(<span class="string">"multi get socket count : "</span>).append(cmdMap.size()).toString());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Map ret = <span class="keyword">new</span> HashMap(keys.length);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">new</span> NIOLoader(<span class="keyword">this</span>).doMulti(asString, cmdMap, keys, ret);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; keys.length; i++)</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="keyword">if</span> ((!keys[i].equals(cleanKeys[i])) &amp;&amp; (ret.containsKey(cleanKeys[i]))) &#123;</span><br><span class="line">        ret.put(keys[i], ret.get(cleanKeys[i]));</span><br><span class="line">        ret.remove(cleanKeys[i]);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (log.isDebugEnabled())</span><br><span class="line">      log.debug(<span class="keyword">new</span> StringBuilder().append(<span class="string">"++++ memcache: got back "</span>).append(ret.size()).append(<span class="string">" results"</span>).toString());</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>请求多台服务器是串行的，结果导致客户端操作时间累加，请求堆积，最终导致性能下降。</p>
<h2 id="解决方法有两个："><a href="#解决方法有两个：" class="headerlink" title="解决方法有两个："></a>解决方法有两个：</h2><p>一是把串行请求改为并行请求，可以参考spymemcached的并行实现：    </p>
<ul>
<li>第一步，将本次操作构造成一个针对每个 node 的 Operation 对象，加入连接对象中；    </li>
<li>第二步，在连接对象中，将所有的 node 操作放入 addedQueue 队列，然后触发 Selector 方式异步非阻塞的执行；</li>
</ul>
<p>一是把key根据一个系列的手机散列不同的MC服务器上，这样就达到请求一台服务器获取所有的内容了，不过根据就不同的业务场景散列方法也不同，比较不好处理。</p>
<p>或者不使用getMulti这个方法了</p>
<p>必须使用getMulti方法的时候可以把缓存数据复制到另一个memcache集群上，一个集群负责读取一半的keys，但是又会引发需要更多的CPU的问题。</p>
<p><a href="http://www.cnblogs.com/zhengyun_ustc/p/multigethole.html" title="旁观者的博客" target="_blank" rel="external">旁观者的博客</a>也分析了这类分析，很透彻，提供给大家参考下</p>
<p>该博文发表于：<a href="http://www.itzhai.com/mc-use-getmulti-problem.html" target="_blank" rel="external">http://www.itzhai.com/mc-use-getmulti-problem.html</a></p>

      
    </div>
    <footer class="article-footer">
        <div class="article-meta pull-left">
          
  

  <span class="post-categories">
    <i class="icon-categories"></i>
    <a href="/categories/Cache/">Cache</a>
  </span>


          
  

  <span class="post-tags">
    <i class="icon-tags"></i>
    <a href="/tags/Memcached/">Memcached</a>
  </span>


        </div>
        
    </footer>
  </div>
</article>



  <article class="post article">

  
  
    <h3 class="article-title"><a href="/Java/spring/2015010601-接口设计原则/"><span>接口设计原则</span></a></h3>
  


  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/Java/spring/2015010601-接口设计原则/" rel="bookmark">
        <time class="entry-date published" datetime="2016-02-02T06:33:13.000Z">
          2016-02-02
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <blockquote>
<p>Author: ChinSyun Pang<br>Weibo: <a href="http://weibo.com/arthinkingplus" target="_blank" rel="external">arthinking_plus</a><br>Posted in: <a href="http://www.itzhai.com" target="_blank" rel="external">http://www.itzhai.com</a></p>
</blockquote>
<p>接口尽量设计的单一职责，会方便代码的扩展和维护。</p>

      
    </div>
    <footer class="article-footer">
        <div class="article-meta pull-left">
          
  

  <span class="post-categories">
    <i class="icon-categories"></i>
    <a href="/categories/设计模式/">设计模式</a>
  </span>


          
        </div>
        
    </footer>
  </div>
</article>



  <article class="post article">

  
  
    <h3 class="article-title"><a href="/blog/20150131_2015年技术学习规划/"><span>2015年技术学习规划</span></a></h3>
  


  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/blog/20150131_2015年技术学习规划/" rel="bookmark">
        <time class="entry-date published" datetime="2016-02-02T06:33:13.000Z">
          2016-02-02
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <blockquote>
<p>Author: ChinSyun Pang<br>Weibo: <a href="http://weibo.com/arthinkingplus" target="_blank" rel="external">arthinking_plus</a><br>Posted in: <a href="http://www.itzhai.com" target="_blank" rel="external">http://www.itzhai.com</a></p>
</blockquote>
<p>##软件架构：</p>
<p>###设计模式 </p>
<ul>
<li>《head first 设计模式》</li>
<li>《设计模式之禅》</li>
<li>《Effective Java》</li>
</ul>
<p>###项目经验总结<br>总结项目中的技术，所做的内容和技术上的改进。</p>
<p>###框架源码解读<br>通过阅读优秀的开源框架，学习Java面向对象的设计原理。</p>
<p>##工作相关技术研究</p>
<p>###Nginx<br>Nginx使用   </p>
<ul>
<li>《深入理解Nginx : 模块开发与架构解析》</li>
</ul>
<p>###Jsoup<br>Jsoup源码解读    </p>
<p>###Spring<br>Spring源码解读    </p>
<p>###MySQL<br>MySQL架构与设计  </p>
<p>SQL语句优化    </p>
<p>###JDBC</p>
<p>数据库连接池实现</p>
<p>###Tomcat<br>Tomcat源码解析</p>
<p>##操作系统：</p>
<p>###Linux &amp; Unix</p>
<ul>
<li>《UNIX编程艺术》</li>
<li>《鸟哥的Linux私房菜》</li>
</ul>
<p>##网络</p>
<p>###HTTP</p>
<ul>
<li>《http权威指南》</li>
</ul>
<p>##数据库</p>
<p>###MySQL优化</p>
<ul>
<li>《高性能MySQL》</li>
</ul>
<p>##JVM</p>
<ul>
<li>《深入理解Java虚拟机》</li>
</ul>
<p>##数据结构与算法<br>尽量通过C语言学习或复习数据结构和算法知识，同时通过开源框架和Java源码学习数据结构与算法的运用，多对比现有开源框架的效率，思考改进的空间。</p>
<ul>
<li>《数据结构与算法分析》</li>
<li>《算法导论》</li>
<li>《算法引轮 – 一种创造性方法》</li>
<li></li>
</ul>
<p>###程序员基本修养</p>
<ul>
<li>《编程之美》</li>
<li>《编程珠玑》</li>
<li>《更多的编程珠玑》</li>
<li>《代码大全》</li>
<li>《Elements of Programming》</li>
<li>《C Interfaces and Implementations》</li>
<li>《writing efficient programs》</li>
</ul>

      
    </div>
    <footer class="article-footer">
        <div class="article-meta pull-left">
          
  

  <span class="post-categories">
    <i class="icon-categories"></i>
    <a href="/categories/杂谈/">杂谈</a>
  </span>


          
  

  <span class="post-tags">
    <i class="icon-tags"></i>
    <a href="/tags/Hexo/">Hexo</a>
  </span>


        </div>
        
    </footer>
  </div>
</article>



  <article class="post article">

  
  
    <h3 class="article-title"><a href="/Java/jsoup/2014020301_项目总体结构/"><span>jsoup项目总体结构</span></a></h3>
  


  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/Java/jsoup/2014020301_项目总体结构/" rel="bookmark">
        <time class="entry-date published" datetime="2016-02-02T06:33:13.000Z">
          2016-02-02
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <blockquote>
<p>Author: ChinSyun Pang<br>Weibo: <a href="http://weibo.com/arthinkingplus" target="_blank" rel="external">arthinking_plus</a><br>Posted in: <a href="http://www.itzhai.com" target="_blank" rel="external">http://www.itzhai.com</a></p>
</blockquote>
<p>#项目结构如下<br>先来介绍下整体的项目结构和每个类的作用</p>
<p>##1、org.jsoup.helper<br>这个包里面包含了jsoup的辅助类</p>
<p>###1.1、DataUtils<br>处理数据的静态辅助类，主要用来把输入流转换为Document对象。</p>
<p>###1.2、DescendableLinkedList<br>实现一个从后往前遍历的迭代器，并兼容一些JDK 1.5中不支持的JDK 1.6提供的LinkedList方法。里面主要实现一个DescendingIterator继承了Iterator实现倒序遍历的功能的。</p>
<p>通过使用DescendableLinkedList执行如下的代码，将会输出<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">b</span><br><span class="line">a</span><br></pre></td></tr></table></figure></p>
<p>与默认实现的迭代器输出相反的顺序了。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">DescendableLinkedList&lt;String&gt; list = <span class="keyword">new</span> DescendableLinkedList&lt;String&gt;();</span><br><span class="line">list.add(<span class="string">"a"</span>);</span><br><span class="line">list.add(<span class="string">"b"</span>);</span><br><span class="line">Iterator&lt;String&gt; iterator =list.descendingIterator();</span><br><span class="line"><span class="keyword">while</span>(iterator.hasNext())&#123;</span><br><span class="line">	System.out.println(iterator.next());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>###1.3、HttpConnection<br>Connection的实现类，Connection提供了方便的接口，用于从网络抓取内容，并解析成Document对象。可以这样获取到一个Connection对象：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">org.jsoup.Jsoup.connect(String)</span><br></pre></td></tr></table></figure></p>
<p>Connections包含了Connection.Request和Connection.Response，请求的配置可以通过userAgent(String)方法进行，或者在Connection.Request里面进行配置。</p>
<p>###1.4、StringUtil<br>功能很少的String辅助类，专门为jsoup设计的</p>
<p>###1.5、Validate<br>为jsoup而设计的简单的验证方法类，里面校验参数的时候使用了IllegalArgumentException（RuntimeException），不需要强制捕获，表示该错误为不可预知的异常，无需捕获，抛出该异常后，后面的代码不会继续执行，如下面的asdf不会打印出来：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">StringUtil.padding(-<span class="number">1</span>);  <span class="comment">// 抛出IllegalArgumentException</span></span><br><span class="line">System.out.println(<span class="string">"asdf"</span>);</span><br></pre></td></tr></table></figure></p>
<p>##2、org.jsoup.nodes<br>HTML元素节点的相关类</p>
<p>###2.1、Attribute<br>HTML元素的一个属性对象，包括属性名和属性值。</p>
<p>###2.2、Attributes<br>一个HTML元素的属性集合</p>
<p>###2.3、Comment<br>注释元素，如 <!-- -->，继承自Node</p>
<p>###2.4、DataNode<br>一个数据节点，用于style，script标签，因为包含了css和js脚本，这些标签中的内容不能转换为文本显示，继承自Node。</p>
<p>###2.5、Document<br>一个HTML的文档对象Document，继承自Element。</p>
<p>###2.6、DocumentType<br>&lt;!DOCTYPE&gt; 节点</p>
<p>###2.7、Element<br>继承自Node，一个HTML元素，包含标签名称，属性集合，和子节点（包括文本节点和其他节点）。</p>
<p>###2.8、Entities<br>HTML实体和转义规则，这些转义对应的规则，存储在该包目录下的entities-base.properties和entities-full.properties文件里面。</p>
<p>###2.9、FormElement<br>表单元素</p>
<p>###2.10、Node<br>基本的抽象节点模型，Document，Comment等都是Node的子类。</p>
<p>###2.11、TextNode<br>一个文本节点，继承自Node。</p>
<p>###2.12、XmlDeclaration<br>一个XML声明</p>
<p>##3、org.jsoup.parser</p>
<p>###3.1、CharacterReader</p>
<p>###3.2、HtmlTreeBuilder</p>
<p>###3.3、HtmlTreeBuilderState</p>
<p>###3.4、ParseError</p>
<p>###3.5、ParseErrorList</p>
<p>###3.6、Parser</p>
<p>###3.7、Tag</p>
<p>###3.8、Token</p>
<p>###3.9、Tokeniser</p>
<p>###3.10、TokeniserState</p>
<p>###3.11、TokenQueue</p>
<p>###3.12、TreeBuilder</p>
<p>###3.13、XmlTreeBuilder</p>
<p>##4、org.jsoup.safety</p>
<p>###4.1、Cleaner</p>
<p>###4.2、Whitelist</p>
<p>##5、org.jsoup.select</p>
<p>###5.1、Collector</p>
<p>###5.2、CombiningEvaluator</p>
<p>###5.3、Elements</p>
<p>###5.4、Evaluator</p>
<p>###5.5、NodeTraversor</p>
<p>###5.6、NodeVisitor</p>
<p>###5.7、QueryParser</p>
<p>###5.8、Selector</p>
<p>###5.9、StructuralEvaluator</p>
<p>##Connection</p>
<p>##HttpStatusException</p>
<p>##Jsoup</p>
<p>##UnsupportedMimeTypeException</p>

      
    </div>
    <footer class="article-footer">
        <div class="article-meta pull-left">
          
  

  <span class="post-categories">
    <i class="icon-categories"></i>
    <a href="/categories/jsoup/">jsoup</a>
  </span>


          
  

  <span class="post-tags">
    <i class="icon-tags"></i>
    <a href="/tags/IntelliJ-IDEA/">IntelliJ IDEA</a>, <a href="/tags/MAC/">MAC</a>
  </span>


        </div>
        
    </footer>
  </div>
</article>



  <article class="post article">

  
  
    <h3 class="article-title"><a href="/Java/热部署/"><span>Resin中的热部署</span></a></h3>
  


  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/Java/热部署/" rel="bookmark">
        <time class="entry-date published" datetime="2016-02-02T06:33:13.000Z">
          2016-02-02
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <blockquote>
<p>Author: ChinSyun Pang<br>Weibo: <a href="http://weibo.com/arthinkingplus" target="_blank" rel="external">arthinking_plus</a><br>Posted in: <a href="http://www.itzhai.com" target="_blank" rel="external">http://www.itzhai.com</a></p>
</blockquote>
<p>###Resin中的热部署<br>在resin.conf中添加如下的JVM启动参数：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">jvm-arg</span>&gt;</span>-Xdebug<span class="tag">&lt;/<span class="name">jvm-arg</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>表示启动debug模式，当更新了类中的方法的时候，控制台会提示reloading class，这是通过JVM的HotSwap功能动态更新的。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">... Reloading ...</span><br><span class="line">``` </span><br><span class="line"></span><br><span class="line">由于JVM的HotSwap不支持新增属性，方法和类的修改，所以进行了这些操作之后，是无法实现热部署的，Resin会自动改用Hot deploy的方式进行应用更新。</span><br><span class="line"></span><br><span class="line">当去掉该启动参数的时候，修改一个类，控制台会提示如下的内容：</span><br></pre></td></tr></table></figure>
<p>… WebApp[…] stopping<br>… WebApp[…] active<br>```</p>
<p>###远程调试相关参数<br><a href="http://itindex.net/detail/46971-java-%E8%B0%83%E8%AF%95" title="Xdebug" target="_blank" rel="external">-Xdebug</a> -Xrunjdwp,transport=dt_socket,server=y,address=5432,suspend=n,onthrow=java.io.IOException,launch=/sbin/echo</p>

      
    </div>
    <footer class="article-footer">
        <div class="article-meta pull-left">
          
  

  <span class="post-categories">
    <i class="icon-categories"></i>
    <a href="/categories/Java/">Java</a>
  </span>


          
  

  <span class="post-tags">
    <i class="icon-tags"></i>
    <a href="/tags/热部署/">热部署</a>
  </span>


        </div>
        
    </footer>
  </div>
</article>



  <article class="post article">

  
  
    <h3 class="article-title"><a href="/Java/JDK配置与JVM监控/"><span>JDK配置与JVM监控</span></a></h3>
  


  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/Java/JDK配置与JVM监控/" rel="bookmark">
        <time class="entry-date published" datetime="2016-02-02T06:33:13.000Z">
          2016-02-02
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <blockquote>
<p>Author: ChinSyun Pang<br>Weibo: <a href="http://weibo.com/arthinkingplus" target="_blank" rel="external">arthinking_plus</a><br>Posted in: <a href="http://www.itzhai.com" target="_blank" rel="external">http://www.itzhai.com</a></p>
</blockquote>
<p>#安装JDK</p>
<blockquote>
<p><a href="http://jingyan.baidu.com/article/b0b63dbfd5db8b4a48307027.html" title="ubuntu 12.04 LTS 安装配置JDK" target="_blank" rel="external">ubuntu 12.04 LTS 安装配置JDK</a>    </p>
</blockquote>
<p>下载jdk-xxx.bin</p>
<p>解压文件<br>chmod u+x jdk-xxx.bin<br>./jdk-xxx.bin    </p>
<p>复制解压出jdk-xxx文件夹到/usr/lib下<br>sudo mkdir -p /usr/lib/jvm/<br>cp -r jdk-xxx /usr/lib/jvm/jdkxxx</p>
<p>#配置JDK</p>
<blockquote>
<p><a href="http://blog.chinaunix.net/uid-26404477-id-3471246.html" title="ubuntu 12.04安装jdk" target="_blank" rel="external">ubuntu 12.04安装jdk</a></p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt-get install gedit</span><br><span class="line">sudo gedit /etc/profile</span><br></pre></td></tr></table></figure>
<p>or<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /etc/</span><br><span class="line">vim profile</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">export JAVA_HOME=/usr/lib/jvm/jdk1.7.0_10</span><br><span class="line">export JRE_HOME=/usr/lib/jvm/jdk1.7.0_10/jre </span><br><span class="line">export CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar:$JAVA_HOME/lib:$JRE_HOME/lib:$CLASSPATH</span><br><span class="line"></span><br><span class="line">export PATH=$JAVA_HOME/bin:$PATH</span><br></pre></td></tr></table></figure>
<p>关闭，保存，使用source更新一下profile文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source ~/.profile</span><br></pre></td></tr></table></figure></p>
<p>如果之前系统里面已经安装了openjdk，可以使用如下方法将默认jdk更改过来：</p>
<p>将系统默认的jdk修改过来<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo update-alternatives --install /usr/bin/java java /usr/lib/jvm/jdk1.7.0_10/bin/java 300</span><br></pre></td></tr></table></figure></p>
<p>输入sun jdk前的数字就好了    </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ sudo update-alternatives --install /usr/bin/javac javac /usr/lib/jvm/jdk1.7.0_10/bin/javac 300</span><br><span class="line">$ sudo update-alternatives --config java </span><br><span class="line">$ sudo update-alternatives --config javac</span><br></pre></td></tr></table></figure>
<p>#使用VisualVM监控远程主机JVM</p>
<blockquote>
<p><a href="http://www.blogjava.net/titanaly/archive/2012/03/20/372318.html" title="visualvm监控jvm及远程jvm监控方法" target="_blank" rel="external">visualvm监控jvm及远程jvm监控方法</a></p>
</blockquote>
<p>##直接使用JDK<br>如果是直接监控JVM，则在 <code>/etc/profile</code> 文件里面添加如下配置：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">export JAVA_OPTS="-Dcom.sun.management.jmxremote.port=<span class="tag">&lt;<span class="name">port</span>&gt;</span> -Dcom.sun.management.jmxremote.ssl=false</span><br><span class="line">-Dcom.sun.management.jmxremote.authenticate=false -Djava.rmi.server.hostname=<span class="tag">&lt;<span class="name">hostname</span>&gt;</span>  </span><br><span class="line">-Dcom.sun.management.jmxremote.ssl=false"</span><br><span class="line">```    </span><br><span class="line"></span><br><span class="line">详细参考：</span><br><span class="line">&gt; [使用Java自带的VisualVM监控远程主机JVM内存使用情况](http://www.cnblogs.com/chenying99/archive/2012/06/21/2557208.html "使用Java自带的VisualVM监控远程主机JVM内存使用情况")</span><br><span class="line"></span><br><span class="line">##使用resin</span><br><span class="line">在resin.conf配置文件中添加如下配置：</span><br><span class="line">```xml</span><br><span class="line"><span class="tag">&lt;<span class="name">jvm-arg</span>&gt;</span>-Xdebug<span class="tag">&lt;/<span class="name">jvm-arg</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">jvm-arg</span>&gt;</span>-Dcom.sun.management.jmxremote<span class="tag">&lt;/<span class="name">jvm-arg</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">jvm-arg</span>&gt;</span>-Djava.rmi.server.hostname=192.168.75.34<span class="tag">&lt;/<span class="name">jvm-arg</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">jvm-arg</span>&gt;</span>-Dcom.sun.management.jmxremote.port=9934<span class="tag">&lt;/<span class="name">jvm-arg</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">jvm-arg</span>&gt;</span>-Dcom.sun.management.jmxremote.ssl=false<span class="tag">&lt;/<span class="name">jvm-arg</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">jvm-arg</span>&gt;</span>-Dcom.sun.management.jmxremote.authenticate=false<span class="tag">&lt;/<span class="name">jvm-arg</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>在客户端使用JMX连接即可</p>

      
    </div>
    <footer class="article-footer">
        <div class="article-meta pull-left">
          
  

  <span class="post-categories">
    <i class="icon-categories"></i>
    <a href="/categories/Java/">Java</a>
  </span>


          
  

  <span class="post-tags">
    <i class="icon-tags"></i>
    <a href="/tags/JVM/">JVM</a>, <a href="/tags/JDK/">JDK</a>
  </span>


        </div>
        
    </footer>
  </div>
</article>




<nav class="pagination">
  
  <a href="/page/5/" class="pagination-prev">Prev</a>
  
  
  <a href="/page/7/" class="pagination-next">Next</a>
  
</nav>
      </main>
    </article>

    <footer id="colophon" class="site-footer" role="contentinfo"><p class="site-info">
  Proudly powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and
  Theme by <a href="https://github.com/CodeDaraW/Hacker" target="_blank">Hacker</a>
  </br>
  
  &copy; 2016 arthinking
  
</p>
</footer>
    
  </div>
</div>
</body>
</html>